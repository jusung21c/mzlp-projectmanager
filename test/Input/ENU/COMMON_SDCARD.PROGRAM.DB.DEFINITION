! DIALOG에서 사용 가능한 Multi-Modal ID 저장
JINIE Common.ContextKeywordsSdCard (NUMBER N.DIALOG)

	TEMPORARY NUMBER N.TEMP := 0 ;
	
	IF N.DIALOG = @N_DIALOG_NAVI_FIND_BIG_CATEGORY THEN
		BEGIN
			S.GENRE.ID := "" ;
			N.TEMP := 2 ;
			
			! Category Alter ID
			LOG "LPLOG: RESULT : S.GENRE.TABLE.BIG = " + S.GENRE.TABLE.BIG ;
			! S.GENRE.TABLE.BIG := " 8
			! 1#0#0#\fRestaurants\f#0x1000#0x1000#\f641001\fBIG" ;
			
			WHILE N.TEMP < N.GENRE.COUNT.BIG	DO
				BEGIN
					S.GENRE.ID := S.GENRE.ID + " " + S.GENRE.TABLE.BIG[N.TEMP][4];
					N.TEMP := N.TEMP + 1;
				END
				
			$S.CONTEXT.KEYWORDS := "\@N_TAG_EXIT_ID \@N_TAG_BACK_ID \@N_TAG_HELP_ID" + S.GENRE.ID ;
		END
		
	IF N.DIALOG = @N_DIALOG_NAVI_FIND_MID_CATEGORY THEN
		BEGIN
			S.GENRE.ID := "" ;
			N.TEMP := 2 ;
			
			! Category Alter ID
			LOG "LPLOG: RESULT : S.GENRE.TABLE.MID.SELECT = " + S.GENRE.TABLE.MID.SELECT ;
			N.GENRE.COUNT.MID.SELECT ~= S.GENRE.TABLE.MID.SELECT[1][1] ;
			N.GENRE.COUNT.MID.SELECT := N.GENRE.COUNT.MID.SELECT + 2 ;
			! S.GENRE.TABLE.MID.SELECT := " 8
			! 1#1#0#\fFast Food Restaurants\f#0x1080#0x1080#\f642001\fMID" ;
			
			WHILE N.TEMP < N.GENRE.COUNT.MID.SELECT	DO
				BEGIN
					S.GENRE.ID := S.GENRE.ID + " " + S.GENRE.TABLE.MID.SELECT[N.TEMP][4];
					N.TEMP := N.TEMP + 1;
				END
				
			$S.CONTEXT.KEYWORDS := "\@N_TAG_EXIT_ID \@N_TAG_BACK_ID \@N_TAG_HELP_ID \@N_TAG_NEXT_PAGE_ID \@N_TAG_PREVIOUS_PAGE_ID" + S.GENRE.ID ;
		END
	
	LOG "LP LOG : Common.ContextKeywords() : " + $S.CONTEXT.KEYWORDS ;
EOP

! PRE PROCESSOR에서 사용하는 SYSTEM CALL 변수 호출
JINIE Common.SystemCallPreSdCard (NUMBER N.DIALOG)

	IF N.DIALOG = @N_DIALOG_NAVI_FIND_MID_CATEGORY THEN
		BEGIN
			MESSAGE "(VH) \fS.GENRE.TABLE.MID.SELECT" ;
		END
		
EOP

! DIALOG에서 사용하는 LEX DB LOAD
JINIE Common.LexSdCard (NUMBER N.DIALOG)

	TEMPORARY NUMBER N.LEX.TYPE := 1 ;
	
	! @N_LEX_BASE - 1
	! @N_LEX_NUM - 2
	! @N_LEX_NAME - 3
	! @N_LEX_SDCARD - 5
	! @N_LEX_SERVER - 7
	! @N_LEX_HOUSENUMBER - 11
	
	$S.CONTEXT.LEX := "\@N_LEX_BASE" ;
	
	! @N_LEX_SDCARD 사용
	IF N.DIALOG = @N_DIALOG_NAVI_FIND_BIG_CATEGORY | N.DIALOG = @N_DIALOG_NAVI_FIND_MID_CATEGORY THEN
		BEGIN
			IF N.NAVI.SDCARD.EXIST = 1 THEN
				BEGIN
					N.LEX.TYPE := N.LEX.TYPE * 5 ;
				END
			ELSE
				BEGIN
					N.LEX.TYPE := N.LEX.TYPE ;
				END
		END
	
	! LEX DB LOAD
	IF N.LEX.TYPE % 2 = 0 THEN
		BEGIN
			$S.CONTEXT.LEX := $S.CONTEXT.LEX + "+ \@N_LEX_NUM" ;
		END
	IF N.LEX.TYPE % 3 = 0 THEN
		BEGIN
			$S.CONTEXT.LEX := $S.CONTEXT.LEX + "+ \@N_LEX_NAME" ;
		END
	IF N.LEX.TYPE % 5 = 0 THEN
		BEGIN
			$S.CONTEXT.LEX := $S.CONTEXT.LEX + "+ \@N_LEX_SDCARD" ;
		END
	IF N.LEX.TYPE % 7 = 0 THEN
		BEGIN
			$S.CONTEXT.LEX := $S.CONTEXT.LEX + "+ \@N_LEX_SERVER" ;
		END
	IF N.LEX.TYPE%11 = 0 THEN
		BEGIN
			$S.CONTEXT.LEX := $S.CONTEXT.LEX + "+ \@N_LEX_HOUSENUMBER" ;
		END
EOP

! DIALOG에서 사용하는 GRAMMAR 및 ACTIVATE RULE 설정
JINIE Common.GrammarLoadSdCard (NUMBER N.DIALOG)

	S.GRAMMAR := "" ;
	S.ACTIVATION := "" ;
	
	IF N.DIALOG = @N_DIALOG_NAVI_FIND_BIG_CATEGORY THEN
		BEGIN
			S.GRAMMAR := "\@N_GRAMMAR_NAVI_FIND_BIG_CATEGORY" ;
		END	

	IF N.DIALOG = @N_DIALOG_NAVI_FIND_MID_CATEGORY THEN
		BEGIN
			IF S.INNER.NAVI.CATEGORY.ID = "\@N_TAG_CATEGORY_BIG_RESTAURANTS_ID" THEN
				BEGIN
					S.GRAMMAR := "\@N_GRAMMAR_NAVI_FIND_RESTAURANTS" ;
				END
				
			IF S.INNER.NAVI.CATEGORY.ID = "\@N_TAG_CATEGORY_BIG_AUTOMOTIVE_ID" THEN
				BEGIN
					S.GRAMMAR := "\@N_GRAMMAR_NAVI_FIND_AUTOMOTIVE" ;

					S.ACTIVATION := "\@N_GRAMMAR_NAVI_FIND_AUTOMOTIVE<\"ALL\",\"CATEGORY_AUTOMOTIVE_KIA\"><\"ALL\",\"CATEGORY_AUTOMOTIVE_HYUNDAI\"><\"ALL\",\"CATEGORY_AUTOMOTIVE_EV\">" ;
					
					IF N.VENDER.POI.AUTOMOTIVE = 1 THEN ! HYUNDAI
						BEGIN
							S.ACTIVATION := S.ACTIVATION + "-\@N_GRAMMAR_NAVI_FIND_AUTOMOTIVE<\"ALL\",\"CATEGORY_AUTOMOTIVE_KIA\">" ;
						END
					ELSE ! N.VENDER.POI.AUTOMOTIVE = 2 THEN ! KIA
						BEGIN
							S.ACTIVATION := S.ACTIVATION + "-\@N_GRAMMAR_NAVI_FIND_AUTOMOTIVE<\"ALL\",\"CATEGORY_AUTOMOTIVE_HYUNDAI\">" ;
						END
					
					IF N.VENDER.POI.AUTOMOTIVE.EV = 0 THEN ! NOT EV
						BEGIN
							S.ACTIVATION := S.ACTIVATION + "-\@N_GRAMMAR_NAVI_FIND_AUTOMOTIVE<\"ALL\",\"CATEGORY_AUTOMOTIVE_EV\">" ;
						END
				END
			IF S.INNER.NAVI.CATEGORY.ID = "\@N_TAG_CATEGORY_BIG_TRAVEL_ID" THEN
				BEGIN
					S.GRAMMAR := "\@N_GRAMMAR_NAVI_FIND_TRAVEL" ;
				END
			IF S.INNER.NAVI.CATEGORY.ID = "\@N_TAG_CATEGORY_BIG_SHOPPING_ID" THEN
				BEGIN
				  S.GRAMMAR := "\@N_GRAMMAR_NAVI_FIND_SHOPPING" ;
				END
			IF S.INNER.NAVI.CATEGORY.ID = "\@N_TAG_CATEGORY_BIG_RECREATION_ID" THEN
				BEGIN
					S.GRAMMAR := "\@N_GRAMMAR_NAVI_FIND_RECREATION" ;
				END
			IF S.INNER.NAVI.CATEGORY.ID = "\@N_TAG_CATEGORY_BIG_FINANCIAL_SERVICES_ID" THEN
				BEGIN
					S.GRAMMAR := "\@N_GRAMMAR_NAVI_FIND_FINANCIAL_SERVICES" ;
				END
			IF S.INNER.NAVI.CATEGORY.ID = "\@N_TAG_CATEGORY_BIG_COMMUNITY_ID" THEN
				BEGIN
					S.GRAMMAR := "\@N_GRAMMAR_NAVI_FIND_COMMUNITY" ;
				END
			IF S.INNER.NAVI.CATEGORY.ID = "\@N_TAG_CATEGORY_BIG_SERVICES_ID" THEN
				BEGIN
					S.GRAMMAR := "\@N_GRAMMAR_NAVI_FIND_SERVICES" ;
				END
		END

	LOG "LP LOG : Common.GrammarLoad () - S.GRAMMAR = " + S.GRAMMAR ;
	LOG "LP LOG : Common.GrammarLoad () - S.ACTIVATION = " + S.ACTIVATION ;
	
	CALL Common.Grammar (S.GRAMMAR, S.ACTIVATION) ;
EOP
