JINIE System.Param.ASR ()

	! SPEECH RECOGNITION ENGINE PARAMETERS
	$N.STT.PARAMETER.VAD.ENABLE.FLAG := @N_FLAG_ON ;
	$N.STT.PARAMETER.VAD.ENABLE.VALUE := 1 ;
	$N.STT.PARAMETER.VAD.TRAILINGSILENCE.FLAG := @N_FLAG_ON ;
	$N.STT.PARAMETER.VAD.TRAILINGSILENCE.VALUE := 1000 ;
	$N.STT.PARAMETER.TIMEOUT.LEADINGSILENCE.FLAG := @N_FLAG_ON ;
	$N.STT.PARAMETER.TIMEOUT.LEADINGSILENCE.VALUE := 5000 ; ! 발화 전 묵음 구간 LSILENCE ETC: 5sec / Help: 10sec
	$N.STT.PARAMETER.TIMEOUT.PROCESS.FLAG := @N_FLAG_ON ;
	$N.STT.PARAMETER.TIMEOUT.PROCESS.VALUE := 8000 ; ! LH_AUDIOSOURCE_PARAM_TIMEOUT, 묵음구간 + 발화구간 + tSilence구간 : 총 timeout 시간 TIMEOUT_SPEECH: ETC: 8sec / Help, Dial: 20sec, VDE : 15sec
	$N.STT.PARAMETER.VAD.SENSITIVITY.FLAG := @N_FLAG_ON ;
	$N.STT.PARAMETER.VAD.SENSITIVITY.VALUE := 30 ;
	$N.STT.PARAMETER.VAD.SPEECHENERGYTHRESHOLD.FLAG := @N_FLAG_ON ; ! LH_FX_PARAM_ABSOLUTE_THRESHOLD
	$N.STT.PARAMETER.VAD.SPEECHENERGYTHRESHOLD.VALUE := 0 - 6000 ;
	
	! CONTEXT PARAMETER DUMP LOG SETTING
	$N.STT.TRACE.PARAMETER.CONTEXT := @N_FLAG_ON ;

	! LP2.5 New supported
	!$N.STT.PARAMETER.RESULT.STRATEGY.FLAG := @N_FLAG_OFF ;
	!$N.STT.PARAMETER.RESULT.STRATEGY.VALUE := 0 ;
	!$N.STT.PARAMETER.VAD.MINIMUMSPEECH.FLAG := @N_FLAG_ON ;
	!$N.STT.PARAMETER.VAD.MINIMUMSPEECH.VALUE := 60 ;
	!$N.STT.PARAMETER.AGC.ENABLE.FLAG := @N_FLAG_ON ;
	!$N.STT.PARAMETER.AGC.ENABLE.VALUE := 0 ;
	!$N.STT.PARAMETER.AGC.FARTALK.FLAG := @N_FLAG_ON ;
	!$N.STT.PARAMETER.AGC.FARTALK.VALUE := 1 ;
	!$N.STT.PARAMETER.TIMEOUT.SPEECH.FLAG := @N_FLAG_ON ;
	!$N.STT.PARAMETER.TIMEOUT.SPEECH.VALUE := 8000 ;
	!$N.STT.PARAMETER.LC.TRANSCRIPTIONS.FLAG := @N_FLAG_ON ;
	!$N.STT.PARAMETER.LC.TRANSCRIPTIONS.VALUE := 10 ;
	!$N.STT.PARAMETER.SEARCH.APPROXIMATION.FLAG := @N_FLAG_ON ;
	!$N.STT.PARAMETER.SEARCH.APPROXIMATION.VALUE := 7000 ;
	!$N.STT.PARAMETER.CONTROL.AUTOMATICRESTART.FLAG := @N_FLAG_OFF ;
	!$N.STT.PARAMETER.CONTROL.AUTOMATICRESTART.VALUE := 0 ;
	!$N.STT.PARAMETER.CONTROL.GARBAGEMODEL.FLAG := @N_FLAG_ON ;
	!$N.STT.PARAMETER.CONTROL.GARBAGEMODEL.VALUE := 50 ;
	!$N.STT.PARAMETER.CONTROL.SPEAKERCHANGE.FLAG := @N_FLAG_ON ;
	!$N.STT.PARAMETER.CONTROL.SPEAKERCHANGE.VALUE := 1 ;
EOP

JINIE System.Param.TTS ()

	! SPEECH SYNTHESIS ENGINE PARAMETERS
	$N.TTS.PARAMETER.VOLUME.FLAG := @N_FLAG_OFF ;
	$N.TTS.PARAMETER.VOLUME.VALUE := 1 ;
	$N.TTS.PARAMETER.SPEED.FLAG := @N_FLAG_OFF ;
	$N.TTS.PARAMETER.SPEED.VALUE := 500 ;
	$N.TTS.PARAMETER.PITCH.FLAG := @N_FLAG_OFF ;
	$N.TTS.PARAMETER.PITCH.VALUE := 10000 ;
	$N.TTS.PARAMETER.WAIT.FLAG := @N_FLAG_OFF ;
	$N.TTS.PARAMETER.WAIT.VALUE := 6000 ;
	$N.TTS.PARAMETER.DOMAIN.FLAG := @N_FLAG_OFF ;
	$N.TTS.PARAMETER.DOMAIN.VALUE := 6000 ;
EOP

! Barge In 사양에 따른 Parameter, Beep 설정
JINIE System.Param.Bargein ()

	$N.CONTROL.FUNCTION.BARGEIN.FLAG := N.CONTROL.FUNCTION.BARGEIN.FLAG ; ! 사양으로 전달 받은 값으로 Barge In Flag 설정
	S.INNER.LOG.STRING ~= $N.CONTROL.FUNCTION.BARGEIN.FLAG ;
	LOG "LP LOG : System.Param.Bargein - $N.CONTROL.FUNCTION.BARGEIN.FLAG = " + S.INNER.LOG.STRING ;
	
	$N.STT.PARAMETER.VAD.SENSITIVITY.VALUE := 50 ;
	$N.STT.PARAMETER.VAD.SPEECHENERGYTHRESHOLD.VALUE := 0 - 2000 ;
	S.BEEP := "\@N_PROMPT_BEEP_BARGEIN" ;
	
	IF $N.CONTROL.FUNCTION.BARGEIN.FLAG = @N_FLAG_ON THEN
		BEGIN
			$N.CONTROL.FUNCTION.BARGEIN.LATENCY := 50 ; ! BOS Polling 대기 시간 지정(Do-Lab Dependant, Default : 50)
			$N.CONTROL.FUNCTION.BARGEIN.MODE := 0 ; ! Barge in Module 지정(Do-Lab : 0, Nuance : 1)
			$N.CONTROL.FUNCTION.BARGEIN.THRESHOLD := 0 ; ! 인식기 재구동 여부를 결정할 Threshold 값 지정, 0-Best Confidence가 지정한 Threshold보다 작은 경우 인식기를 재구동한다.(HKMC 시나리오 Dependant)
		END
EOP

! Scenario에 따른 Barge In 기능 동작 설정(On : 1, Off : 0)
JINIE System.BargeinSettingControl (NUMBER N.DIALOG)

	! NO_RECOG Dialog는 인식기를 구동하지 않으므로 Barge In Flag Off 설정
	IF N.DIALOG = @N_DIALOG_NO_RECOG_DRIVING | N.DIALOG = @N_DIALOG_NO_RECOG_BACK | N.DIALOG = @N_DIALOG_NO_RECOG_EXIT |
		N.DIALOG = @N_DIALOG_NO_RECOG_HOUSE_NUMBER_STEP THEN
		BEGIN
			$N.CONTROL.FUNCTION.BARGEIN.FLAG := @N_FLAG_OFF ;
		END
	ELSE
		BEGIN
			! Common.GuidancePromptControl () 기준 Prompt 출력하지 않는 분기는 Barge In Off 설정(디오랩 요청)
			IF N.VOLUME.SILENCE = 1 | $N.INTERRUPT.TYPE = 1 | $N.INTERRUPT.TYPE = 3 |
			S.RESULT.FIX.CID = "\@N_TAG_NEXT_PAGE_ID" & N.GLOBAL.LISTITEM.REMAIN = 1 |
			S.RESULT.FIX.CID = "\@N_TAG_PREVIOUS_PAGE_ID" & N.GLOBAL.LISTITEM.REMAIN = 1 THEN
				BEGIN ! Beep만 출력되는 경우, Barge In 미 동작이 사양
					$N.CONTROL.FUNCTION.BARGEIN.FLAG := @N_FLAG_OFF ;
				END
			ELSE
				BEGIN
					$N.CONTROL.FUNCTION.BARGEIN.FLAG := N.CONTROL.FUNCTION.BARGEIN.FLAG ; ! 사양으로 전달 받은 값으로 Barge In Flag 설정
				END
		END
		
	S.INNER.LOG.STRING ~= $N.CONTROL.FUNCTION.BARGEIN.FLAG ;
	LOG "LP LOG : System.Param.Bargein - $N.CONTROL.FUNCTION.BARGEIN.FLAG = " + S.INNER.LOG.STRING ;
EOP

JINIE System.Param.Adaptation ()

	! SA/EA ADAPTATION
	$N.STT.PARAMETER.ADAPTATION.ENVIRONMENT.FLAG := @N_FLAG_ON ; ! SESSIONRESETTIME (On : 1, Off 0)
	$N.STT.PARAMETER.ADAPTATION.ENVIRONMENT.VALUE := N.PARAMETER.ENVIRONMENT.ADAPTATION ; ! Default : 0, speaker(0) utterance(off 1) Never(2)
	$N.STT.PARAMETER.ADAPTATION.SPEAKER.FLAG := @N_FLAG_ON ; ! LH_REC_PARAM_SPEAKER_ADAPTATION (On : 1, Off 0)
	$N.STT.PARAMETER.ADAPTATION.SPEAKER.VALUE := N.PARAMETER.SPEAKER.ADAPTATION ; ! Default : 0, Automatics(0), Apply(1), Train(2), Disable(3)
	
	! LOG
	S.INNER.LOG.STRING ~= $N.STT.PARAMETER.ADAPTATION.ENVIRONMENT.VALUE ;
	LOG "LP LOG : System.Param.Adaptation - $N.STT.PARAMETER.ADAPTATION.ENVIRONMENT.VALUE = " + S.INNER.LOG.STRING ;
	S.INNER.LOG.STRING ~= $N.STT.PARAMETER.ADAPTATION.SPEAKER.VALUE ;
	LOG "LP LOG : System.Param.Adaptation - $N.STT.PARAMETER.ADAPTATION.SPEAKER.VALUE = " + S.INNER.LOG.STRING ;
EOP

JINIE System.Param.Threshold ()

	! CONFIDENCE
	$N.STT.RESULT.CONTROL.THRESHOLD.UTTERANCE.HIGH := 5000 ; ! High Threshold
	$N.STT.RESULT.CONTROL.THRESHOLD.UTTERANCE.LOW := 4000 ; ! Low Threshold
	$N.STT.RESULT.CONTROL.THRESHOLD.UTTERANCE.GAP := 400 ; ! Gap

	S.INNER.LOG.STRING ~= $N.STT.RESULT.CONTROL.THRESHOLD.UTTERANCE.HIGH ;
	LOG "LP LOG : System.Param.Threshold - $N.STT.RESULT.CONTROL.THRESHOLD.UTTERANCE.HIGH = " + S.INNER.LOG.STRING ;
	S.INNER.LOG.STRING ~= $N.STT.RESULT.CONTROL.THRESHOLD.UTTERANCE.LOW ;
	LOG "LP LOG : System.Param.Threshold - $N.STT.RESULT.CONTROL.THRESHOLD.UTTERANCE.LOW = " + S.INNER.LOG.STRING ;
	S.INNER.LOG.STRING ~= $N.STT.RESULT.CONTROL.THRESHOLD.UTTERANCE.GAP ;
	LOG "LP LOG : System.Param.Threshold - $N.STT.RESULT.CONTROL.THRESHOLD.UTTERANCE.GAP = " + S.INNER.LOG.STRING ;
EOP

JINIE System.Param.Timeout (NUMBER N.DIALOG)

	! TIME-OUT
	$N.STT.PARAMETER.TIMEOUT.LEADINGSILENCE.FLAG  := @N_FLAG_ON ;
	$N.STT.PARAMETER.TIMEOUT.PROCESS.FLAG         := @N_FLAG_ON ;
	
	! LSILENCE ETC: 5sec / Help: 10sec
	! TIMEOUT_SPEECH: ETC: 8sec / Help, Dial: 20sec / VDE : 15sec
	
	! DEFAULT SPEC
	$N.STT.PARAMETER.TIMEOUT.LEADINGSILENCE.VALUE := 5000 ;
	$N.STT.PARAMETER.TIMEOUT.PROCESS.VALUE := 8000 ;
	
	IF N.DIALOG = @N_DIALOG_NAVI_VDE_LOCATION | N.DIALOG = @N_DIALOG_NAVI_VDE_STREETCITY_STEP | N.DIALOG = @N_DIALOG_NAVI_VDE_HOUSE_NUMBER_STEP THEN
		BEGIN
			$N.STT.PARAMETER.TIMEOUT.LEADINGSILENCE.VALUE := 5000 ;
			$N.STT.PARAMETER.TIMEOUT.PROCESS.VALUE := 15000 ;
		END
	
	IF N.DIALOG = @N_DIALOG_MAINMENU_HELP_CATEGORY | N.DIALOG = @N_DIALOG_MAINMENU_HELP_PHONE | N.DIALOG = @N_DIALOG_MAINMENU_HELP_RADIO |
		N.DIALOG = @N_DIALOG_MAINMENU_HELP_MEDIA | N.DIALOG = @N_DIALOG_MAINMENU_HELP_NAVIGATION THEN
		BEGIN
			$N.STT.PARAMETER.TIMEOUT.LEADINGSILENCE.VALUE := 10000 ;
			$N.STT.PARAMETER.TIMEOUT.PROCESS.VALUE := 20000 ;
		END
		
	IF N.DIALOG = @N_DIALOG_BT_VAD_NUM_LOCAL | N.DIALOG = @N_DIALOG_BT_VAD_NUM_SELECT THEN
		BEGIN
			$N.STT.PARAMETER.TIMEOUT.LEADINGSILENCE.VALUE := 5000 ;
			$N.STT.PARAMETER.TIMEOUT.PROCESS.VALUE := 20000 ;
		END
EOP
